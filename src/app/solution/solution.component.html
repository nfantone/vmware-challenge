<div class="layout container">
  <div class="toolbar col-xs-12">
    <h2 class="title">Containers</h2>
    <ul>
      <li>
        <div class="checkbox sort {{ order ? 'asc' : 'desc' }}">
          <label>
            <input type="checkbox" [(ngModel)]="order">
            Sort
          </label>
        </div>
      </li>
      <li>
        <div class="checkbox critical" title="Using more than 80% of their allocated memory">
          <label>
            <input type="checkbox" (change)="toggleCriticalFilter($event)">
            High memory usage
          </label>
        </div>
      </li>
    </ul>
  </div>
  <div class="row">
    <section class="card {{ container.state | lowercase }} col-xs-12 col-md-3 transition" *ngFor="let container of containers | async | memoryAllocation:memoryThreshold | sortById:order">
      <div class="card-header col-xs-12">
        <h2 class="title pull-left">#{{ container.id }} {{ container.name }}</h2>
        <span class="bold pull-right">{{ container.memory | vmwMemoryFormat }}</span>
      </div>
      <div class="utilization-column col-xs-12">
        <div class="col-xs-3">
          <span>CPU</span>
          <p class="bold box">{{ container.utilization.cpu }}%</p>
        </div>
        <div class="col-xs-3">
          <span>RAM</span>
          <p class="bold box">{{ container.utilization.memory | vmwMemoryFormat }}</p>
        </div>
        <div class="col-xs-3">
          <span>Disk</span>
          <p class="bold box">{{ container.utilization.disk | vmwMemoryFormat }}</p>
        </div>
      </div>
      <div class="card-footer pull-right">
        <button class="btn {{ container.state | lowercase}} transition" (click)="toggleContainerState($event, container)">
          {{ container.state === 'STARTED' ? 'Stop' : 'Start'}}
        </button>
      </div>
    </section>
  </div>
</div>
